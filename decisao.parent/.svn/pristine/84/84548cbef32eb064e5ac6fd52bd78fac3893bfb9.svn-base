<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:stf="http://www.stf.jus.br/custom-components">
	
	<s:decorate template="/acoes/support/action.template.xhtml">
		<ui:param name="facetName" value="principal" />
		<ui:define name="descricao">Insira uma observação, se necessário:</ui:define>
		<ui:define name="conteudo">
			<s:decorate template="/common/decorators/edit.xhtml">
				<ui:define name="label">Observação:</ui:define>
				<h:inputTextarea value="#{actionFacesBean.observacao}"
					rows="5" cols="60" style="width: 300px" onkeyup="this.value = this.value.substring(0, 500);"/>
			</s:decorate>
		</ui:define>
		<ui:define name="botoes">
			<a:commandButton value="Confirmar"
				action="#{actionFacesBean.validateAndExecute}"
				reRender="actionModalPanel"
				oncomplete="showActionPanel('panelItem', #{actionFacesBean.definition.width}, #{actionFacesBean.definition.height})"
				eventsQueue="ajaxQueue" ignoreDupResponses="true" />
		</ui:define>
	</s:decorate>	
	
	<s:decorate template="/acoes/support/action.template.xhtml">
		<ui:param name="facetName" value="warnings" />
		<ui:define name="descricao">Verifique as informações abaixo antes de prosseguir.</ui:define>
		<ui:define name="conteudo">
			<c:if test="#{actionFacesBean.existemTextosNaoSeraoSuspensos}">
				<div>
				<div class="vermelho">Atenção! Os seguintes textos não poderão
				ter sua publicação suspensa:</div>
				<stf:messages  level="WARN, ERROR"/></div>
			</c:if>
			<div>
			<div>Os seguintes textos estão em lista de textos iguais. Esta
			operação afetará todos os textos da lista que pertencem ao gabinete.</div>
			<stf:messages level="INFO" />
			<div>Total de textos iguais: #{actionFacesBean.textosIguaisAdicionados.size}</div>
			</div>
			<s:div style="margin: 3px 0px; text-align: center; font-size: 1.2em;" styleClass="vermelho" rendered="#{principalFacesBean.temImpedimento}">Anotação de Impedimento ou Suspeição</s:div>
		</ui:define>
		<ui:define name="botoes">
			<a:commandButton value="Suspender Publicação"
				action="#{actionFacesBean.execute}" reRender="actionModalPanel"
				oncomplete="showActionPanel('panelItem', #{actionFacesBean.definition.width}, #{actionFacesBean.definition.height})" eventsQueue="ajaxQueue"
							ignoreDupResponses="true"/>
		</ui:define>
	</s:decorate>

	<s:decorate template="/acoes/support/action.template.xhtml">
		<ui:param name="facetName" value="final" />
		<ui:define name="descricao">Resultado da operação:</ui:define>
		<ui:define name="conteudo">
			<c:if test="#{actionFacesBean.existeTextoValido}">
				<div>
				<div>Operação realizada com sucesso para os seguintes textos:</div>
				<stf:messages level="INFO" passed="true"/></div>
			</c:if>
			<c:if test="#{actionFacesBean.existeTextoNaoProcessado}">
				<div>
				<div class="vermelho">Os seguintes textos não puderam ter a
				publicação suspensa! Caso façam parte de lista de textos iguais, os
				demais textos destas listas também não foram alterados.</div>
				<stf:messages level="ERROR" /></div>
			</c:if>
			<c:if test="#{actionFacesBean.existePublicacaoEmAta}">
				<div>
				<div class="vermelho">A ação "Suspender Publicação" não pode ser realizada,
				                      porque o texto está em uma ata de publicação.</div>
				<stf:messages level="WARN" /></div>
			</c:if>
		</ui:define>
	</s:decorate>
</ui:composition>
