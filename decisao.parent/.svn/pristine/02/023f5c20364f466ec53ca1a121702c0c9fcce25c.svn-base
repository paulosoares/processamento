package br.jus.stf.estf.decisao.support.controller.faces;import java.io.PrintWriter;import java.io.StringWriter;import org.jboss.seam.annotations.In;import org.jboss.seam.annotations.Name;/** * Faces Bean para recuperação e apresentação de erros inesperados * capturados durante a execução do sistema. *  * @author Rodrigo Barreiros * @since 07.06.2010 */@Name("errorMessageBean")public class ErrorMessageBean {		@In(value="org.jboss.seam.handledException")	private Exception exception;	/**	 * Retorna a StackTrace da exceção capturada.	 *  	 * @return string com a pilha de erros	 */	public String getDetails() {		if (exception != null) {			return getStackTrace(exception);		} else {			return "Não há informações detalhadas para o problema encontrado.";		}	}	/**	 * Monta a pilha de erros, dada a exceção capturada.	 * 	 * @param exception a exceção capturada	 * @return a pilha de erros	 */	public String getStackTrace(Exception exception) {		StringWriter sw = new StringWriter();		PrintWriter pw = new PrintWriter(sw);		Throwable cause = exception.getCause();		if (cause == null) {			exception.printStackTrace(pw);		} else {			pw.println(exception);			pw.print("Caused by: ");			cause.printStackTrace(pw);		}		return sw.toString();	}}